# Configuración Ansible para "Infra Made Easy"
# Optimizada para el curso de infraestructura colaborativa

[defaults]
# Inventario principal con hosts y grupos
inventory = inventory/hosts

# Directorio de roles modulares
roles_path = roles

# Variables por grupo (equipos)
# vault_password_file = .vault_pass  # Opcional: para secrets (descomentado cuando sea necesario)

# Configuración de conexiones
host_key_checking = False
remote_user = ubuntu
timeout = 30

# Optimizaciones de performance
gathering = smart
fact_caching = memory
cache_plugin_timeout = 86400  # 24 horas
forks = 10

# Output más limpio y colorido
stdout_callback = yaml
bin_ansible_callbacks = True
display_skipped_hosts = False
display_ok_hosts = False

# Logging para debugging
log_path = /tmp/ansible.log
action_warnings = False
deprecation_warnings = False

[privilege_escalation]
# Configuración sudo
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# Optimizaciones SSH para múltiples conexiones
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o ServerAliveInterval=60
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r

# Timeout para conexiones lentas en AWS
connect_timeout = 30
connect_retry_timeout = 15

[inventory]
# Plugin para inventarios dinámicos (futuro AWS EC2)
enable_plugins = host_list, script, auto, yaml, ini, toml

# [galaxy] - Usar configuración por defecto
