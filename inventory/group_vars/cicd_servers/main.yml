# VARIABLES EQUIPO CI/CD

# Información del equipo
team_info:
  name: "cicd"
  description: "Equipo especializado en integración y despliegue continuo con GitHub Actions"
  emoji: "🚀"

# Configuración de GitHub Actions
github_actions_config:
  runner_version: "2.311.0"
  runner_directory: "/opt/actions-runner"
  runner_user: "github-runner"
  runner_group: "github-runner"
  max_runners: 3
  labels: ["infra-made-easy", "self-hosted", "linux", "x64"]
  runner_name_prefix: "ime-runner"
  
# Configuración de Docker
docker_config:
  enable_docker_in_docker: true
  docker_group_members: ["github-runner"]
  enable_docker_compose: true
  enable_buildx: true
  enable_registry_mirror: false
  
# Repositorios a monitorear
repositories:
  - name: "sample-web-app"
    url: "https://github.com/curso-infra/sample-web-app.git"
    branch: "main"
    deploy_target: "webserver_ssl_servers"
    
  - name: "monitoring-configs"
    url: "https://github.com/curso-infra/monitoring-configs.git"
    branch: "main"
    deploy_target: "monitoring_servers"

# Configuración de pipeline
pipeline_config:
  enable_webhooks: true
  webhook_secret: "curso-infra-webhook-secret"
  stages:
    - test
    - security_scan
    - build
    - deploy
    
# Configuración de deployments
deployment_config:
  strategy: "rolling"
  timeout: 300
  rollback_enabled: true
  backup_before_deploy: true
  
# Puertos a abrir
firewall_ports:
  - 8080  # GitHub Actions Dashboard (opcional)
  - 9100  # Node Exporter
  - 443   # HTTPS para webhooks
  
# Integraciones con otros equipos
integrations:
  webserver_ssl:
    enable: true
    deploy_method: "ssh_rsync"
    deploy_path: "/var/www/html"
    deploy_user: "www-data"
    
  security:
    enable: true
    security_scan_enabled: true
    security_gate_url: "http://security-server:9114/security-check"
    
  monitoring:
    enable: true
    metrics_port: 9100
    github_actions_exporter_enabled: true
    workflow_metrics_enabled: true
    
  traefik:
    enable: true
    auto_register_services: true
    webhook_url: "/traefik/webhook"
